"use strict";!function(t,e){function o(t){if(!t)return t;var e,s=[Number,String,Boolean];if(s.forEach(function(o){t instanceof o&&(e=o(t))}),"undefined"==typeof e)if("[object Array]"===Object.prototype.toString.call(t))e=[],t.forEach(function(t,s,i){e[s]=o(t)});else if("object"==typeof t)if(t.nodeType&&"function"==typeof t.cloneNode)e=t.cloneNode(!0);else if(t.prototype)e=t;else if(t instanceof Date)e=new Date(t);else{e={};for(var i in t)e[i]=o(t[i])}else e=t;return e}function s(t){return r.call(t).replace("[object ","").replace("]","").toLowerCase()}function i(){if(!(this instanceof i))return new i;var t=30*Math.random()>25,o=30*Math.random()>25;this.init=function(){if(this.predator=t,this.male=o,this.seekingMate=!1,this.pursuingMate=!1,this.elem=document.createElement("div"),this.size=1,this.elem.style.height=this.size+"px",this.elem.style.width=this.size+"px",this.predator)if(this.male){this.elem.style.backgroundColor="red",this.maxSize=Math.floor(3*Math.random()+7);var s=Math.floor(10*Math.random()+10)}else this.elem.style.backgroundColor="cyan",this.maxSize=Math.floor(3*Math.random()+5),s=Math.floor(10*Math.random()+10);else this.male?(this.elem.style.backgroundColor="green",this.maxSize=Math.floor(5*Math.random()+17),s=Math.floor(50*Math.random()+10)):(this.elem.style.backgroundColor="lightgreen",this.maxSize=Math.floor(5*Math.random()+6),s=Math.floor(150*Math.random()+10));this.growthRateSeed=function(){return s},this.growing=this.maxSize>this.size,this.elem.style.position="absolute",this.posTop=Math.floor(Math.random()*e.body.offsetHeight),this.elem.style.top=this.posTop+"px",this.posLeft=Math.floor(Math.random()*e.body.offsetWidth),this.elem.style.left=this.posLeft+"px",this.elem.style.borderRadius="10000px",this.elem.classList.add("creature"),e.body.appendChild(this.elem),this.catagories()}}var a=10,h={predator:{male:[],female:[]},prey:{male:[],female:[]}},r=(o({one:{"one-one":new String("hello"),"one-two":["one","two",!0,"four"]},two:document.createElement("div"),three:[{name:"three-one",number:100,obj:new function(){this.name="Object test"}}]}),Object.prototype.toString),n={cycleLength:a,roster:[],register:function(t){var e,o;if("array"===s(t))for(e=t.length,o=0;e>o;o++)t[o].init(),this.roster.unshift(t);else t.init(),this.roster.unshift(t)},cycleLoop:function(t){var e=t.roster.length-1;for(e;e>=0;e--)t.roster[e].executeActions.call(t.roster[e])},init:function(){setInterval(this.cycleLoop,this.cycleLength,this),delete this.init}};i.prototype={i:0,actions:[function(t){var e;e=this.predator?this.male?h.predator.female:h.predator.male:this.male?h.prey.female:h.prey.male,this.pursuingMate||this.move(),this.growing&&this.grow(),this.seekingMate&&this.findMate(e)}],catalog:{predator:{male:[],female:[]},prey:{male:[],female:[]}},catagories:function(){this.predator?this.male?h.predator.male.push(this):h.predator.female.push(this):this.male?h.prey.male.push(this):h.prey.female.push(this)},move:function(t){var o,s,i,h,r=null!==t&&"undefined"!=typeof t;if(r){console.log(this.posTop,":",this.posLeft),this.size=70,this.elem.style.height=this.size+"px",this.elem.style.width=this.size+"px";var n=Math.abs(this.posTop-t.posTop),l=Math.abs(this.posLeft-t.posLeft);i=this.posTop>t.posTop?2:1,n=10>=n?n:10,l=10>=l?l:10,h=this.posLeft>t.posLeft?2:1,1===i?o=parseInt(this.elem.style.top)+Math.floor(n):2===i&&(o=parseInt(this.elem.style.top)-Math.floor(n)),1===h?s=parseInt(this.elem.style.left)+Math.floor(l):2===h&&(s=parseInt(this.elem.style.left)-Math.floor(l))}else i=Math.floor(2*Math.random()+1),h=Math.floor(2*Math.random()+1),1===i?o=parseInt(this.elem.style.top)+Math.floor(10*Math.random()+1):2===i&&(o=parseInt(this.elem.style.top)-Math.floor(10*Math.random()+1)),1===h?s=parseInt(this.elem.style.left)+Math.floor(10*Math.random()+1):2===h&&(s=parseInt(this.elem.style.left)-Math.floor(10*Math.random()+1));o>0&&o<e.body.offsetHeight&&(this.elem.style.top=o+"px"),s>0&&s<e.body.offsetWidth&&(this.elem.style.left=s+"px"),r&&Math.abs(this.posTop-t.posTop)<this.size/2&&Math.abs(this.posLeft-t.posLeft)<this.size/2&&(console.log("Happy day!"),this.backgroundColor=orange,this.pursuingMate=!1,this.seekingMate=!1,setTimeout(function(){this.seekingMate=!0},40*a))},grow:function(){var t,e,o=Math.floor(Math.random()*this.growthRateSeed()+1);1===o&&(t=1,e=this.elem.offsetHeight,this.size=e+t,this.size>.75*this.maxSize&&(this.seekingMate=!0),this.size>=this.maxSize&&(this.growing=!1),this.elem.style.height=this.size+"px",this.elem.style.width=this.size+"px")},pursueMate:function(t){this.pursuingMate=!0,this.matingInterval=setInterval(function(){this.move(t)}.call(this),a)},findMate:function(t){for(var e=t.length-1;e>=0;e--)Math.floor(this.posTop-t[e].posTop)<100&&Math.floor(this.posTop-t[e].posTop)<100&&(this.pursueMate(t[e]),e=0)},executeActions:function(){var t=this.actions.length-1;for(t;t>=0;t--)this.actions[t].call(this)},registerAction:function(){}},t.onload=function(){for(var t,e=0,s=50;s>e;e++)t=i(),n.register(o(t));n.init()}}(window,document);